<!-- <ion-header class="ion-no-border" [translucent]="true"> -->
  <ion-header *ngIf="(user$ | async) as user" class="ion-no-border" [translucent]="true">
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-back-button text="" defaultHref="/profile"></ion-back-button>
      </ion-buttons>
      <!-- <ion-title>HOLA {{ user.displayName ? user.displayName : user.email }}</ion-title> -->
      <ion-buttons slot="end">
        <!-- <ion-button>
          <ion-icon class="toolbar-icon" name="chatbubbles-outline"></ion-icon>
        </ion-button> -->
        <ion-button>
          <ion-icon class="toolbar-icon" name="chatbox-ellipses-outline"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-content class="ion-padding" [fullscreen]="false">
    <!-- <ion-header collapse="condense">
      When on iOS, this second header will be displayed, and the first header will only show when the users start to scroll. This follows the iOS design guidelines.
    </ion-header> -->

    <div id="container">
      <ion-row>
        <!-- <ion-col size="12" size-lg="8" offset-lg="2" class="field-col"> -->
        <ion-col size="12"  size-lg="10" offset-lg="1" class="field-col">


          <ion-img src="../../../assets/img/on.png"></ion-img>
          <div class="header-info">
            <h4 class="ion-padding-bottom">REGISTRO NUEVO USUARIO</h4>
            <p>¡Bienvenido a la comunidad!</p>
            <p class="no-margin">Para formar parte de On Sowo y poder disfrutar de todas las ventajas y de la comunidad, tienes que completar todos los pasos.</p>
            <p class="no-margin">Es muy importante completar bien tu perfil para formar parte de la comunidad. No aceptamos a nadie que no tenga el perfil completo.</p>
            <p>¿Por qué? Porque el valor mas importante de On Sowo es la comunidad y para eso, tiene que haber personas detras de los perfiles.</p>
          </div>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="12"  size-lg="10" offset-lg="1" class="field-col">

          <form [formGroup]="signupForm" (ngSubmit)="onSignup()">
            <ion-row>
              <h3>PRIMERO UN POQUITO DE INFORMACIÓN BÁSICA</h3>
            </ion-row>
            <ion-row>
              <ion-col size="12" size-sm="3">
                <div class="photo-header">
                  <h6 class="photo-text">FOTO DE PERFIL</h6>
                  <ion-button class="upload-button" color="sowohigh" size="small">Subir archivo</ion-button>
                </div>
                <!-- <ion-img style="object-fit: cover; height: 300px; display: initial; object-position: 50% 50%;" [src]="defaultValue"></ion-img> -->
                <ion-img [src]="defaultValue"></ion-img>
              </ion-col>

              <ion-col size="12" size-sm="9">
                <ion-row>
                  <ion-col size="12" size-sm="6">
                    <!-- email -->
                    <H6>¿CUAL ES TU CORREO ELECTRONICO?</H6>
                    <mat-form-field class="form-field"  appearance="fill">
                      <!-- <mat-label>Correo electrónico *</mat-label> -->
                      <input #inputEmail matInput placeholder="Correo electrónico *" formControlName="email">
                      <mat-error *ngIf="isSubmitted && signupForm.controls.email.invalid">
                        <span *ngIf="isSubmitted && signupForm.controls.email.errors.required">Este campo es obligatorio.</span>
                        <span *ngIf="isSubmitted && signupForm.controls.email.errors.email">Formato de correo electrónico no valido.</span>
                      </mat-error>

                      <!-- <mat-error *ngIf="(signupForm.controls.email.statusChanges | async)!=='valid'">Correo electrónico no valido.
                      </mat-error> -->
                    </mat-form-field>

                  </ion-col>
                  <ion-col size="12" size-sm="6">
                    <!-- password -->
                    <H6>ELIGE UNA CONTRASEÑA</H6>
                    <mat-form-field class="form-field" appearance="fill">
                      <!-- <mat-label>Password *</mat-label> -->
                      <input matInput [type]="hide ? 'password' : 'text'" placeholder="Password *" formControlName="password">
                      <mat-icon matSuffix (click)="hide = !hide">{{ hide ? 'visibility' : 'visibility_off'}}</mat-icon>
                      <mat-error *ngIf="isSubmitted && signupForm.controls.password.invalid">
                        <span *ngIf="isSubmitted && signupForm.controls.password.errors.required">Este campo es obligatorio.</span>
                        <span *ngIf="isSubmitted && signupForm.controls.password.errors.pattern">Password invalido. Demasiado corto.</span>
                      </mat-error>
                    </mat-form-field>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col size="12" size-sm="6">
                    <!-- firstName -->
                    <h6>¿COMO TE LLAMAS?</h6>
                    <mat-form-field class="form-field"  appearance="fill">
                      <!-- <mat-label>Nombre *</mat-label> -->
                      <input matInput placeholder="Nombre *" formControlName="firstName">
                      <mat-error *ngIf="isSubmitted && signupForm.controls.firstName.invalid">
                        <span *ngIf="isSubmitted && signupForm.controls.firstName.errors.required">Este campo es obligatorio.</span>
                      </mat-error>
                    </mat-form-field>
                  </ion-col>
                  <ion-col size="12" size-sm="6">
                    <!-- familyName -->
                    <h6>¿Y TUS APELLIDOS?</h6>
                    <mat-form-field class="form-field"  appearance="fill">
                      <!-- <mat-label>Apellidos *</mat-label> -->
                      <input matInput placeholder="Apellidos *" formControlName="familyName">
                      <mat-error *ngIf="isSubmitted && signupForm.controls.familyName.invalid">
                        <span *ngIf="isSubmitted && signupForm.controls.familyName.errors.required">Este campo es obligatorio.</span>
                      </mat-error>
                    </mat-form-field>
                  </ion-col>
                </ion-row>
              </ion-col>
            </ion-row>




            <ion-row>
              <ion-col size="12">

                <!-- Areas -->
                <div class="area-container">
                  <p>Elige tus areas de conocimiento:</p>
                  <ng-container  *ngFor="let area of checkAreas, let i = index">
                    <mat-checkbox
                      class="checkbox-area"
                      (change)="onChange($event, i)"
                      [checked]="area.checked">
                      {{ area.name }}
                    </mat-checkbox>
                  </ng-container>

                  <!-- <p class="text-badge" *ngIf="areas ? areas.length == 0 : true">Pulsa el boton para añadir areas de responsabilidad </p>
                  <ng-container *ngFor="let badge of areas">
                    <div class="badge-container">
                      <ion-badge  color="sowohigh">{{ badge }}</ion-badge><a class="remove-x" (click)="onRemoveArea(badge)">x</a>
                      <ion-icon name="add-circle-outline" size="large" color="sowohigh" (click)="select.open()"></ion-icon>
                    </div>
                  </ng-container>
                  <div class="select-container">
                    <ion-select
                      interface="popover"
                      selectedText="+"
                      (ionChange)="onAddArea($event)">
                        <ion-select-option *ngFor="let area of allAreas" [value]="area">{{area}}</ion-select-option>
                    </ion-select>
                  </div> -->
                </div>
              </ion-col>
            </ion-row>

            <ion-button class="submit-button ion-margin-top" type="submit" expand="block" fill="solid" shape="round" color="sowohigh">
              REGISTRAR USUARIO
            </ion-button>
            <div class="spinner-container">
              <mat-spinner *ngIf="isLoading"></mat-spinner>
            </div>
        </form>
      </ion-col>
    </ion-row>
  </div>

</ion-content>

            <!-- <div class="input-container">
              <ion-input #inputEmail [ngClass]="{ 'has-error': isSubmitted && signupForm.controls.email.errors }"placeholder="Correo Electrónico" type="email"  formControlName="email"></ion-input>
              <div class="error-container">
                <p *ngIf="isSubmitted && signupForm.get('email').errors?.required">
                  Correo electrónico obligatorio.
                </p>
                <p *ngIf="isSubmitted && signupForm.get('email').errors?.email">
                  Formato no válido.
                </p>
              </div>
            </div>


            <div class="input-container">
              <ion-input [ngClass]="{ 'has-error': isSubmitted && signupForm.controls.password.dirty && signupForm.controls.password.errors }"placeholder="Password" [type]="passwordType"  formControlName="password"></ion-input>
              <ion-icon slot="end" [name]="passwordIcon" class="passwordIcon" (click)="hideShowPassword()"></ion-icon>
              <div class="error-container">
                <p *ngIf="isSubmitted && signupForm.get('password').errors?.required">
                  Password obligatorio.
                </p>
                <p *ngIf="isSubmitted && signupForm.get('password').errors?.pattern">
                  Password invalido. Demasiado corto.
                </p>
              </div>
            </div> -->

